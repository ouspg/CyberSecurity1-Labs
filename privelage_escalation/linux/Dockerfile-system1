FROM ubuntu:focal

# --- Install required packages ---
RUN apt-get update && apt-get install -y \
    nano \
    openssh-server && \
    apt-get clean && rm -rf /var/lib/apt/lists/*

# --- SSH setup ---
RUN mkdir /var/run/sshd

# --- User setup ---
RUN useradd -m -s /bin/bash dev_aarni && \
    echo "dev_aarni:password" | chpasswd && \
    chmod 771 /home/dev_aarni

RUN useradd -m -s /bin/bash devops_venla && \
    echo "devops_venla:password" | chpasswd && \
    chmod 771 /home/devops_venla

# --- Level 1: SUID configuration ---
RUN chmod u+s /usr/bin/base64

# --- Entrypoint ---
CMD ["/usr/sbin/sshd", "-D"]